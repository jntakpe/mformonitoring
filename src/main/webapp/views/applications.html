<div class="breadcrumbs">
    <div class="container">
        <h1 class="pull-left">Liste des applications</h1>
        <ul class="pull-right breadcrumb">
            <li><a ui-sref="application">Home</a></li>
            <li class="active">Applications</li>
        </ul>
    </div>
</div>
<div class="container content">
    <alert ng-if="application.alert.active" type="{{application.alert.type}}" close="application.alert.active = false">
        <i class="fa" ng-class="application.alert.type === 'success' ? 'fa-check': 'fa-warning'"></i>
        <strong ng-if="application.alert.type === 'danger'">Erreur ! </strong>{{application.alert.msg}}
    </alert>
    <form class="form-inline" role="form">
        <div class="form-group col-md-3">
            <label class="sr-only" for="search-nom">Recherche par nom</label>

            <input type="text" class="form-control" id="search-nom" placeholder="Nom"
                   ng-change="application.filter()" ng-model="application.search.nom">
        </div>
        <div class="form-group col-md-2">
            <label class="sr-only" for="search-env">Recherche par environnement</label>

            <select type="text" class="form-control " id="search-env" ng-change="application.filter()"
                    ng-model="application.search.environnement">
                <option value="" selected>Environnement</option>
                <option value="DEVELOPPEMENT">Développement</option>
                <option value="ASSEMBLAGE">Assemblage</option>
                <option value="INTEGRATION">Intégration</option>
                <option value="RECETTE">Recette</option>
                <option value="PRE_PRODUCTION">Pré-production</option>
                <option value="PRODUCTION">Production</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label class="sr-only" for="search-group-id">Recherche par groupId</label>

            <input type="text" class="form-control" id="search-group-id" placeholder="groupId"
                   ng-change="application.filter()" ng-model="application.search.groupId">
        </div>
        <div class="form-group col-md-2">
            <label class="sr-only" for="search-artifact-id">Recherche par artifactId</label>

            <input type="text" class="form-control full-size" id="search-artifact-id" placeholder="ArtifactId"
                   ng-change="application.filter()" ng-model="application.search.artifactId">
        </div>
        <div class="form-group col-md-2 margin-right-10">
            <label for="search-version" class="sr-only">Recherche par version</label>

            <input type="text" class="form-control full-size" id="search-version" ng-change="application.filter()"
                   ng-model="application.search.version" placeholder="Version"/>
        </div>
        <button class="btn btn-warning" ng-click="application.resetFilter()"><i class="fa fa-times"></i> Reset</button>
    </form>
    <table class="table table-striped table-wrap">
        <thead>
        <tr>
            <th ng-click="application.sortColumn('nom')">Nom
                <i class="pull-right fa" ng-class="application.sort.class.nom || 'fa-sort'"></i></th>
            <th ng-click="application.sortColumn('environnement')">Environnement
                <i class="pull-right fa" ng-class="application.sort.class.environnement || 'fa-sort'"></i></th>
            <th ng-click="application.sortColumn('groupId')">GroupId
                <i class="pull-right fa" ng-class="application.sort.class.groupId || 'fa-sort'"></i></th>
            <th ng-click="application.sortColumn('artifactId')">ArtifactId
                <i class="pull-right fa" ng-class="application.sort.class.artifactId || 'fa-sort'"></i></th>
            <th ng-click="application.sortColumn('version')">Version
                <i class="pull-right fa" ng-class="application.sort.class.version || 'fa-sort'"></i></th>
            <th class="col-md-1">Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="app in application.applications">
            <td class="col-md-3"><a href="{{app.url}}">{{app.nom}}</a></td>
            <td class="col-md-2">{{app.environnement}}</td>
            <td class="col-md-2">{{app.groupId}}</td>
            <td class="col-md-2">{{app.artifactId}}</td>
            <td class="col-md-2">{{app.version}}</td>
            <td class="col-md-1">
                <button type="button" class="btn btn-warning btn-xs margin-right-10" ng-click="application.edit(app)">
                    <i class="fa fa-edit"></i>
                </button>
                <button type="button" class="btn btn-danger btn-xs" ng-click="application.removeModal(app)">
                    <i class="fa fa-trash"></i>
                </button>
            </td>
        </tr>
        </tbody>
    </table>
    <pagination total-items="application.props.total" ng-model="application.props.current" boundary-links="true"
                ng-change="application.pageChange()" max-size="5" items-per-page="application.props.numberPerPage"
                class="pull-right"></pagination>
    <button class="btn-u" ng-click="application.editModal()"><i class="fa fa-plus"></i> Ajouter une application</button>
</div>
